<!doctype html>
<html lang="zh">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <meta name="viewport"
          content="width=device-width, initial-scale=1.0, minimum-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <link rel="stylesheet" type="text/css" href="css/styles.css">
    <title>动态</title>

</head>
<body>
<div class="htmleaf-container" weight="100%" height="100%">
    <div class="wrapper">
        <div class="tab1">跳过</div>
        <div class="container">
            <h1>Time</h1>
            <form class="form" id="commentForm" method="post">
                <!--<label for="cname">Name (必需, 最小两个字母)</label>-->
                <input  placeholder="邮箱" type="email" name="email" id="Email" required>

                <!--<label for="password">E-Mail (必需)</label>-->
                <input type="password" placeholder="密码" id="Password" required>

                <!--<input type="password" text="密码" id="Password" required>-->
                <p>
                    <button type="submit" id="login-button">登录</button>
                </p>
            </form>
            <div class="tab2">没有账号？</div>

        </div>
        <ul class="bg-bubbles">
            <li></li>
            <li></li>
            <li></li>
            <li></li>
            <li></li>
            <li></li>
            <li></li>
            <li></li>
            <li></li>
            <li></li>
        </ul>
    </div>
</div>
<script src="js/jquery-2.1.1.min.js" type="text/javascript"></script>
<script src="https://static.runoob.com/assets/jquery-validation-1.14.0/lib/jquery.js"></script>
<script src="https://static.runoob.com/assets/jquery-validation-1.14.0/dist/jquery.validate.min.js"></script>
<script src="https://static.runoob.com/assets/jquery-validation-1.14.0/dist/localization/messages_zh.js"></script>
<script>
    function toJump(flag) {
        android.toJump(flag);
    }
    function to_android(E, Password){
        android.get_from_js(E,Password);
    }
    $(function () {
        $('.tab1').click(function () {
            toJump(1);
        });
        $('.tab2').click(function () {
            toJump(2);
        });
        $('.tab3').click(function () {
            toJump(3);
        });
    })

    $.validator.setDefaults({
        submitHandler: function () {
            event.preventDefault();
            $('form').fadeOut(500);
            $('.wrapper').addClass('form-success');
            login();

        }
    });
    $().ready(function () {
        $("#commentForm").validate();
    });

    function login() {

        var Email = $("#Email").val();
        var Password = $("#Password").val();
        $.ajax({
            type: "post",
            url: "http://47.102.47.139:8080/Servrse_servlet/Web_servlet",
            dataType: 'JSONP',
            jsnop: "callback",
            crossDomain: true,
            async: true,
            data: {"Email": Email, "Password": Password,"Flag":1},

            success: function (json) {
               if(json.res){
                   toJump(4);
                   to_android(Email,Password);
               }
                if(!json.res){
                    alert("密码不正确");
                    window.history.go(0);
                }
            }
        });
    }


</script>

</body>
</html>